From 16a5099a36618f250376bd59d15cab0a3c7e7d02 Mon Sep 17 00:00:00 2001
From: Patrick Griffis <pgriffis@igalia.com>
Date: Wed, 5 Feb 2025 16:18:10 -0600
Subject: [PATCH 2/2] session: Strip authentication credentails on cross-origin
 redirect

This should match the behavior of Firefox and Safari but not of Chromium.

Upstream reference:
https://gitlab.gnome.org/GNOME/libsoup/-/commit/3e5c26415811f19e7737238bb23305ffaf96f66b
---
 tests/auth-test.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

diff --git a/tests/auth-test.c b/tests/auth-test.c
index 51431f2..7f6fc4b 100644
--- a/tests/auth-test.c
+++ b/tests/auth-test.c
@@ -1936,8 +1936,9 @@ main (int argc, char **argv)
 	g_test_add_func ("/auth/cancel-after-retry", do_cancel_after_retry_test);
 	g_test_add_func ("/auth/cancel-on-authenticate", do_cancel_on_authenticate);
 	g_test_add_func ("/auth/auth-uri", do_auth_uri_test);
-        g_test_add_func ("/auth/cancel-request-on-authenticate", do_cancel_request_on_authenticate);
-        g_test_add_func ("/auth/multiple-algorithms", do_multiple_digest_algorithms);
+	g_test_add_func ("/auth/cancel-request-on-authenticate", do_cancel_request_on_authenticate);
+	g_test_add_func ("/auth/multiple-algorithms", do_multiple_digest_algorithms);
+	g_test_add_func ("/auth/strip-on-crossorigin-redirect", do_strip_on_crossorigin_redirect);
 
 	ret = g_test_run ();
 
-- 
2.45.3

