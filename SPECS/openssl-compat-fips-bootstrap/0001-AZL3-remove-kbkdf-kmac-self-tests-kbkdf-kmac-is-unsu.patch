From 78a70a9f78ced29743be568c7e07140a89bc9f1a Mon Sep 17 00:00:00 2001
From: rpm-build <rpm-build>
Date: Tue, 22 Jul 2025 23:16:14 +0000
Subject: [PATCH] AZL3 - remove kbkdf kmac self tests -- kbkdf kmac is
 unsupported

---
 providers/fips/self_test_data.inc | 4 ++++
 test/recipes/30-test_evp.t        | 1 +
 2 files changed, 5 insertions(+)

diff --git a/providers/fips/self_test_data.inc b/providers/fips/self_test_data.inc
index abdc536..2cb5fe3 100644
--- a/providers/fips/self_test_data.inc
+++ b/providers/fips/self_test_data.inc
@@ -498,6 +498,7 @@ static const ST_KAT_PARAM kbkdf_params[] = {
     ST_KAT_PARAM_END()
 };
 
+#if 0
 static const char kbkdf_kmac_mac[] = "KMAC128";
 static unsigned char kbkdf_kmac_label[] = {
     0xB5, 0xB5, 0xF3, 0x71, 0x9F, 0xBE, 0x5B, 0x3D,
@@ -524,6 +525,7 @@ static const ST_KAT_PARAM kbkdf_kmac_params[] = {
     ST_KAT_PARAM_OCTET(OSSL_KDF_PARAM_INFO, kbkdf_kmac_context),
     ST_KAT_PARAM_END()
 };
+#endif
 
 static const char tls13_kdf_digest[] = "SHA256";
 static int tls13_kdf_extract_mode = EVP_KDF_HKDF_MODE_EXTRACT_ONLY;
@@ -615,12 +617,14 @@ static const ST_KAT_KDF st_kat_kdf_tests[] =
         kbkdf_params,
         ITM(kbkdf_expected)
     },
+#if 0
     {
         OSSL_SELF_TEST_DESC_KDF_KBKDF_KMAC,
         OSSL_KDF_NAME_KBKDF,
         kbkdf_kmac_params,
         ITM(kbkdf_kmac_expected)
     },
+#endif
     {
         OSSL_SELF_TEST_DESC_KDF_HKDF,
         OSSL_KDF_NAME_HKDF,
diff --git a/test/recipes/30-test_evp.t b/test/recipes/30-test_evp.t
index 36a192d..c8b18c2 100644
--- a/test/recipes/30-test_evp.t
+++ b/test/recipes/30-test_evp.t
@@ -99,6 +99,7 @@ my @defltfiles = qw(
                      evpkdf_scrypt.txt
                      evpkdf_tls11_prf.txt
                      evpkdf_hmac_drbg.txt
+                     evpkdf_kbkdf_kmac.txt
                      evpmac_blake.txt
                      evpmac_poly1305.txt
                      evpmac_siphash.txt
-- 
2.45.4

