From f39e5f610545a89aadbc714cb9cc2071781b1d02 Mon Sep 17 00:00:00 2001
From: jykanase <v-jykanase@microsoft.com>
Date: Tue, 17 Jun 2025 05:20:20 +0000
Subject: [PATCH] CVE-2024-47081

Upstream Patch Reference: https://github.com/psf/requests/commit/96ba401c1296ab1dda74a2365ef36d88f7d144ef
---
 requests/utils.py | 7 +------
 1 file changed, 1 insertion(+), 6 deletions(-)

diff --git a/requests/utils.py b/requests/utils.py
index 153776c..cb9d01d 100644
--- a/requests/utils.py
+++ b/requests/utils.py
@@ -209,12 +209,7 @@ def get_netrc_auth(url, raise_errors=False):
 
         ri = urlparse(url)
 
-        # Strip port numbers from netloc. This weird `if...encode`` dance is
-        # used for Python 3.2, which doesn't support unicode literals.
-        splitstr = b':'
-        if isinstance(url, str):
-            splitstr = splitstr.decode('ascii')
-        host = ri.netloc.split(splitstr)[0]
+        host = ri.hostname
 
         try:
             _netrc = netrc(netrc_path).authenticators(host)
-- 
2.45.2

