diff -urN keras-3.3.3/pip_build.py keras-3.3.3/pip_build.py
--- keras-3.3.3/pip_build.py	2024-04-26 16:19:54.000000000 -0700
+++ keras-3.3.3/pip_build.py	2024-06-27 13:48:55.897838700 -0700
@@ -29,6 +29,7 @@
 package = "keras"
 build_directory = "tmp_build_dir"
 dist_directory = "dist"
+root_path = ""
 to_copy = ["setup.py", "README.md"]
 
 
@@ -86,7 +87,8 @@
         move_tf_keras_directory()
         print(os.getcwd())
 
-        from keras.src.version import __version__  # noqa: E402
+        #from keras.src.version import __version__  # noqa: E402
+        __version__ = "3.3.3"
 
         export_version_string(__version__, is_nightly, rc_index)
         return build_and_save_output(root_path, __version__)
@@ -119,7 +121,7 @@
 
 def build_and_save_output(root_path, __version__):
     # Build the package
-    os.system("python3 -m build")
+    os.system("python3 setup.py bdist_wheel")
 
     # Save the dist files generated by the build process
     os.chdir(root_path)
@@ -145,6 +147,9 @@
 def install_whl(whl_fpath):
     print(f"Installing wheel file: {whl_fpath}")
     os.system(f"pip3 install {whl_fpath} --force-reinstall --no-dependencies")
+    os.chdir(root_path)
+    os.mkdir("pyproject-wheeldir")
+    shutil.move(whl_fpath, "pyproject-wheeldir")
 
 
 if __name__ == "__main__":
