From 6a39dfaffdb8a6c2080eec0dc7fb1ee532d54025 Mon Sep 17 00:00:00 2001
From: Jens Axboe <axboe@kernel.dk>
Date: Tue, 23 Sep 2025 11:50:46 -0600
Subject: [PATCH] options: check for NULL input string and fail

Waste of time busy work.

Link: https://github.com/axboe/fio/issues/1982
Signed-off-by: Jens Axboe <axboe@kernel.dk>

Modified patch to apply to AzureLinux
Modified-by: Akarsh Chaudhary <v-akarshc@microsoft.com>
Date: Wed, 24 Sep 2025 

Upstream Patch Reference: https://github.com/axboe/fio/commit/6a39dfaffdb8a6c2080eec0dc7fb1ee532d54025.patch
---
 options.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/options.c b/options.c
index e06d9b6..07ebec0 100644
--- a/options.c
+++ b/options.c
@@ -1486,6 +1486,8 @@ static int str_buffer_pattern_cb(void *data, const char *input)
 {
 	struct thread_data *td = cb_data_to_td(data);
 	int ret;
+        if (!input)
+		return 1;
 
 	/* FIXME: for now buffer pattern does not support formats */
 	ret = parse_and_fill_pattern(input, strlen(input), td->o.buffer_pattern,
-- 
2.45.4

