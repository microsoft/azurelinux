From a7d0437cde633312d69215ce9494cc845f74e823 Mon Sep 17 00:00:00 2001
From: Kanishk-Bansal <kbkanishk975@gmail.com>
Date: Wed, 19 Mar 2025 06:03:11 +0000
Subject: [PATCH] python-jinja2-testing-deps

---
 requirements/tests.txt | 20 +++++++++-----------
 tests/test_loader.py   |  6 ++++--
 2 files changed, 13 insertions(+), 13 deletions(-)

diff --git a/requirements/tests.txt b/requirements/tests.txt
index 02dd8e8..b6b592b 100644
--- a/requirements/tests.txt
+++ b/requirements/tests.txt
@@ -1,22 +1,20 @@
 #
-# This file is autogenerated by pip-compile with python 3.10
+# This file is autogenerated by pip-compile-multi
 # To update, run:
 #
-#    pip-compile requirements/tests.in
+#    pip-compile-multi
 #
-attrs==21.2.0
+attrs==21.4.0
     # via pytest
-iniconfig==1.1.1
+exceptiongroup==1.1.1
     # via pytest
-packaging==21.2
+iniconfig==1.1.1
     # via pytest
-pluggy==1.0.0
+packaging==23.2
     # via pytest
-py==1.11.0
+pluggy==1.5.0
     # via pytest
-pyparsing==2.4.7
-    # via packaging
-pytest==6.2.5
+pytest==7.4.0
     # via -r requirements/tests.in
-toml==0.10.2
+tomli==2.0.1
     # via pytest
diff --git a/tests/test_loader.py b/tests/test_loader.py
index b300c8f..cec2d63 100644
--- a/tests/test_loader.py
+++ b/tests/test_loader.py
@@ -174,6 +174,7 @@ class TestFileSystemLoader:
 
 class TestModuleLoader:
     archive = None
+    mod_env = None
 
     def compile_down(self, prefix_loader, zip="deflated"):
         log = []
@@ -187,13 +188,14 @@ class TestModuleLoader:
         self.mod_env = Environment(loader=loaders.ModuleLoader(self.archive))
         return "".join(log)
 
-    def teardown(self):
-        if hasattr(self, "mod_env"):
+    def teardown_method(self):
+        if self.archive is not None:
             if os.path.isfile(self.archive):
                 os.remove(self.archive)
             else:
                 shutil.rmtree(self.archive)
             self.archive = None
+            self.mod_env = None
 
     def test_log(self, prefix_loader):
         log = self.compile_down(prefix_loader)
-- 
2.45.2

