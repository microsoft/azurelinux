os:
  selinux:
    mode: enforcing
  kernelCommandLine:
    extraCommandLine:
      - dm_verity.require_signatures=1
  packages:
    install:
    - erofs-utils
  modules:
  - name: erofs
    loadMode: always
  additionalFiles:
  - source: files/osguard-ci/config.toml
    destination: /etc/containerd/config.toml
    permissions: "644"
  - source: files/osguard-ci/10-podnet.conf
    destination: /etc/cni/net.d/10-podnet.conf
    permissions: "644"
scripts:
  postCustomization:
  - path: scripts/set_os_release_variant_entries.sh
    arguments:
    - --variant-id
    - osguard-ci
    - --variant
    - OS Guard Code Integrity Image
