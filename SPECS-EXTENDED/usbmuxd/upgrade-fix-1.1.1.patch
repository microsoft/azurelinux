From ec88b309cb1a3e6dea0cdb69bc6560da7e4e1ae0 Mon Sep 17 00:00:00 2001
From: rpm-build <rpm-build>
Date: Mon, 17 Nov 2025 15:48:06 +0000
Subject: [PATCH] Skip redefinition of plist enums

---
 src/utils.c | 2 +-
 src/utils.h | 8 +++++---
 2 files changed, 6 insertions(+), 4 deletions(-)

diff --git a/src/utils.c b/src/utils.c
index 206c684..a91faea 100644
--- a/src/utils.c
+++ b/src/utils.c
@@ -302,7 +302,7 @@ int plist_read_from_filename(plist_t *plist, const char *filename)
 	return 1;
 }

-int plist_write_to_filename(plist_t plist, const char *filename, enum plist_format_t format)
+int plist_write_to_filename(plist_t plist, const char *filename, plist_format_t format)
 {
 	char *buffer = NULL;
 	uint32_t length;
diff --git a/src/utils.h b/src/utils.h
index b5cab3f..0e0657c 100644
--- a/src/utils.h
+++ b/src/utils.h
@@ -78,13 +78,15 @@ char *string_concat(const char *str, ...);
 int buffer_read_from_filename(const char *filename, char **buffer, uint64_t *length);
 int buffer_write_to_filename(const char *filename, const char *buffer, uint64_t length);

-enum plist_format_t {
+#ifndef LIBPLIST_H
+typedef enum plist_format_t {
 	PLIST_FORMAT_XML,
 	PLIST_FORMAT_BINARY
-};
+} plist_format_t;
+#endif

 int plist_read_from_filename(plist_t *plist, const char *filename);
-int plist_write_to_filename(plist_t plist, const char *filename, enum plist_format_t format);
+int plist_write_to_filename(plist_t plist, const char *filename, plist_format_t format);

 uint64_t mstime64(void);
 void get_tick_count(struct timeval * tv);
--
2.45.4

