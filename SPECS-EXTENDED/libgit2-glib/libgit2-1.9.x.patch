From 93685d4297e425af67ac6888d6b66dfbcd4b95c8 Mon Sep 17 00:00:00 2001
From: Rui Chen <rui@chenrui.dev>
Date: Mon, 13 Jan 2025 21:23:50 -0500
Subject: [PATCH 2/2] chore: support libgit2 1.9

Signed-off-by: Rui Chen <rui@chenrui.dev>
---
 libgit2-glib/ggit-types.h | 4 ++--
 meson.build               | 2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/libgit2-glib/ggit-types.h b/libgit2-glib/ggit-types.h
index 2a2ed99..184c3e6 100644
--- a/libgit2-glib/ggit-types.h
+++ b/libgit2-glib/ggit-types.h
@@ -990,8 +990,7 @@ typedef enum
 
 typedef enum
 {
-	GGIT_CHECKOUT_NONE                    = 0,
-	GGIT_CHECKOUT_SAFE                    = (1u << 0),
+	GGIT_CHECKOUT_SAFE                    = 0,
 	GGIT_CHECKOUT_FORCE                   = (1u << 1),
 	GGIT_CHECKOUT_RECREATE_MISSING        = (1u << 2),
 	GGIT_CHECKOUT_ALLOW_CONFLICTS         = (1u << 4),
@@ -1010,6 +1009,7 @@ typedef enum
 	GGIT_CHECKOUT_CONFLICT_STYLE_DIFF3    = (1u << 21),
 	GGIT_CHECKOUT_DONT_REMOVE_EXISTING    = (1u << 22),
 	GGIT_CHECKOUT_DONT_WRITE_INDEX        = (1u << 23),
+	GGIT_CHECKOUT_NONE                    = (1u << 30),
 	GGIT_CHECKOUT_UPDATE_SUBMODULES       = (1u << 16),
 	GGIT_CHECKOUT_UPDATE_SUBMODULES_IF_CHANGED = (1u << 17)
 } GgitCheckoutStrategy;
diff --git a/meson.build b/meson.build
index c21107d..9cd26f8 100644
--- a/meson.build
+++ b/meson.build
@@ -126,7 +126,7 @@ glib_dep = dependency('glib-2.0', version: '>=' + glib_req)
 gobject_dep = dependency('gobject-2.0', version: '>=' + glib_req)
 gio_dep = dependency('gio-2.0', version: '>=' + glib_req)
 
-libgit2_dep = dependency('libgit2', version: '>= 1.8.0')
+libgit2_dep = dependency('libgit2', version: '>= 1.9.0')
 
 # XXX: Not nice, but probably our best option
 enable_gir = get_option('introspection') and find_program('g-ir-scanner', required: false).found()
-- 
GitLab

